[tool:pytest]
# pytest configuration for MarkItDown MCP Server

testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Add markers for test categorization
markers =
    unit: Unit tests - fast, isolated tests
    integration: Integration tests - component interaction tests
    performance: Performance tests - slow, resource-intensive tests
    security: Security tests - vulnerability and attack testing
    compatibility: Cross-platform and environment compatibility tests
    slow: Tests that take more than 10 seconds
    requires_tesseract: Tests requiring tesseract OCR engine
    requires_network: Tests requiring network access
    claude_desktop: Tests requiring Claude Desktop integration

# Test output configuration
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --maxfail=5
    --durations=10
    --asyncio-mode=auto

# Async test configuration
asyncio_mode = auto

# Coverage configuration
# Run with: pytest --cov=markitdown_mcp
[tool:coverage:run]
source = markitdown_mcp
branch = true
omit = 
    */tests/*
    */venv/*
    */build/*
    setup.py

[tool:coverage:report]
precision = 2
show_missing = true
skip_covered = false
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:

[tool:coverage:html]
directory = htmlcov